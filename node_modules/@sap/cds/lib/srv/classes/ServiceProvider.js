const lib = require('../@sap/cds-runtime')
const ProtocolAdapter = require ('./ProtocolAdapter')
const Service = require ('./Service')

exports = module.exports = class ServiceProvider extends Service .and (lib.Provider) {
	static new (service, model, options) {
		const o = { kind:options.use, ...options, service }
		const csn = ProtocolAdapter.prepare (model,o)
		const srv = lib.service (csn,o)
		return Object.setPrototypeOf (srv, this.prototype)
	}
}
